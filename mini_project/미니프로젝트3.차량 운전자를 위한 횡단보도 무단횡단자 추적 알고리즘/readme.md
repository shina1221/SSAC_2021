- 프로젝트 명 : 차량 운전자를 위한 횡단보도 무단횡단자 추적 알고리즘

- 개발환경 O/S : windows64 bit

- Language : Python

- 개발개요 : 블랙박스 영상을 이용해 전방의 보행자 횡단보도 기준 무단횡단자 검출

- 담당업무 : 영상데이터 수집 및 전처리, 객체 특정, 객체추적

- 상세내용 : HOG(Histogram of Oriented Gradient) 서술자를 이용하여 특징을 추출한 다음 최종적으로 선형 SVM(Support Vector Machine)으로 대상을 검출하는 HOG-SVM 알고리즘으로 사람이라고 예상되는 객체를 검출함. 이후 대상이 되는 사람의 ROI를 화면에서 특정한 뒤 블랙박스 영상기준으로 차량 신호등이 초록불일 때 전방에 횡단보도를 걷는 사람이 있을 경우 SimpleBlobDetector로 교통 신호등이 초록불일 때를 검출하고 AdaBoost 알고리즘이 적용된 Tracker API로 사람을 추적하여 무단횡단자를 검출하고 알림

# 설명
 - HOG(Histogram of Oriented Gradient):보행자 검출을 목적으로 만들어진 특징 디스크립터 중 하나로 엣지의 기울기 방향과 규모를 히스토그램으로 나타낸 것. SIFT, SURF, ORB 등의 특징 디스크립터들과 다르게 지역적인 특징보다는 전체적인 모양을 표현하기에 적합. HOG는 대상 객체의 상태나 자세가 약간 다르더라도 그 특징을 일반화해서 같은 객체로 인식하는 것이 특징
 
*HOG : HOG 디스크립터를 만들기 위해서 우선 전체 이미지에서 인식하고자 하는 영역을 잘라내야 함. 이것을 윈도라고 하며, 그 크기는 인식할 객체의 크기를 담을 수 있는 정도여야 함. 객체가 너무 작거나 크면 확대하거나 축소해야 하지만 원래의 비율을 유지해야 함. 보행자를 검출할 때는 사람이 세로로 긴 형태라 보통 64x128 크기로 하는게 일반적. 잘라낸 영역을 소벨 필터를 이용해서 엣지의 기울기 gx, gy를 구함. 이와 같이 얻은 엣지의 경사도에 대해 히스토그램을 계산. 이때 무니도 전체를 하나의 히스토그램으로 계산하는 것이 아니라 작은 영역으로 다시 나우어서 히스토그램을 계산하는데, 이 영역을 셀이라고 함. 셀의 크기는 경험적으로 구해야 하지만 보행자 검출에서는 흔히 8x8 크기의 셀로 나눔. 한 셀의 엣지 기울기 값으로 히스토그램을 계산하는데 기울기의 방향을 계급(bin)으로 하고 기울기의 크기를 값으로 누적하는 방식. 이 때 계급은 180도를 20도씩 구간을 나뉘어 9개의 계급을 사용하는 것이 일반적인데 360도가 아닌 180도인 이유는 기울기는 양수와 음수가 같은 방향을 나타내기 때문.
히스토그램 계산을 마치고 나면 다시 노멀라이즈 과정을 거침. 엣지 기울기는 전체 밝기에 민감하므로 주변 픽셀과의 차이를 고려해서 민감성을 제거. 노멀라이즈를 위해서는 다시 한번 윈도를 잘게 나누는데, 이것을 블록이라고 함. 블록의 크기는 흔히 셀 크기의 2배로 하는 것이 일반적. 8x8 크기의 셀인 경우 블록의 크기는 16x16으로 볼 수 있고 36x1 크기의 벡터로 표현할 수 있음. 각 블록은 셀들을 순차적으로 이동하면서 노멀라이즈 하는데, 이때 겹치는 부분을 블록 스트라이드라고 함. 64x128 윈도에 16x16 크기의 블록이 8x8만큼 겹치면서 계산할 경우, 경우의 수는 7x15로 105가 됨. 따라서 최종적인 HOG 디스크립터의 크기는 105*36으로 3780이 됨. (참조:파이썬으로 만드는 OpenCV 프로젝트)
